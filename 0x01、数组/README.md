## 一、什么是数组？

数组（Array）是一种线性表数据结构。它是一段连续的内存空间，存储的是具有相同类型的数据。

> 什么是线性表和非线性表？
>
> 线性表（Linaer List）：数据排成像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。例如：数组，栈，队列，链表等。
>
> 非线性表：数据之间并不是简单的前后关系。例如：树，图，堆等。

----

## 二、数组如何实现随机访问？

**原因：**

由于数组具有连续的内存空间和相同的数据类型的特点，所以数组可以实现随机访问；但是又由于这个特性，数组的插入和删除的效率就会很低，因为会涉及到数据的迁移（除末尾外）。

**随机访问的实现：**

当创建一个新数组时 `int[] array = new int[10]` ，在内存中会给这个数组创建一块连续的内存空间 1000 ~ 1039，则这个内存块的首地址为：`base_address=1000`。

当我们需要随机访问某个数组元素时，可以通过寻址公式 $a[i]\_adress = base\_adress + i * dataType\_size$（dataType\_size：数据类型大小）计算出该下标元素的内存地址。

<img src="https://tva1.sinaimg.cn/large/0082zybply1gca4o6etgij312g0u0tl7.jpg" alt="IMG_2171" style="zoom: 25%;" />

⚠️**需要注意的是**：~~数组适合查找，其时间复杂度为 O(1)~~ 的表述是错误的！

正确的表述是：<font color=orange>数组支持随机访问，根据下标随机访问的时间复杂度为 O(1)。</font>

----

## 三、数组插入和删除操作的改进方法

**插入：**

在插入操作中，将元素插入到指定位置 k，需要将 k 位置之后的元素整体后移一位，此时的时间复杂度为 O(n)。（如果 k=1 时间复杂度为 O(1) ）

如果该数组只作为存储数据的集合，我们可以将位置在 k 的元素移到最后一位，再将插入的元素放到 k 的位置，这样我们就避免大规模的数据移动，而此时间复杂度就变为了 O(1)。

**删除：**

当我们要删除第 k 个位置的元素，为了数据的连续性，此时也要涉及到大规模的数据移动，时间复杂度为 O(n)。（如果 k=1 时间复杂度为 O(1) ）

但是在某些特殊场景下，我们并不一定非得追求数组中数据的连续性。我们将要删除的数据进行标记，当数据没有办法存储更多数据时，再执行一次删除操作，这就大大减少了由于删除数据的迁移操作。而这个思路就是 **JVM 标记清除垃圾回收算法的核心思想。**

----

## 四、警惕数组下标越界

Java 本身就会做越界检查，如果越界就会抛出 ` java.lang.ArrayIndexOutOfBoundsException`。

----

## 五、容器是否能替代数组？

**ArrayList：**

①、支持动态扩容（1.5 倍扩容，但是扩容设计内存申请，比较耗时，最好在初始时确定长度）；

②、可以将数组的操作细节封装起来，便于操作。

**数组：**

①、可以存储基本类型。包装类（Integer 等）涉及自动装箱/拆箱，会有一定的性能损耗。

②、数据已知，且操作简单，使用数组更简便。

③、表示多维数组时，更加直观。例如：

```java
int[][] arry 
ArrayList<ArrayList<Object>> array
```

**总结：**

在业务开发时可以使用容器，省时省力；底层开发时用数组，可以使性能更加优化。